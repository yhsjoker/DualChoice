# 项目接口文档

## 1. 概述

本接口文档用于描述前后端分离项目中各个接口的具体信息，前端使用 Vue，后端使用 Spring Boot。

## 2. 版本信息

- 版本号：v1.0
- 创建时间：2024-11-14
- 更新人：
- 更新说明：

## 3. 基本信息

- 请求协议：HTTP/HTTPS
- 数据格式：JSON
- 认证方式：JWT Token / Session

## 4. 全局响应格式

### 4.1 成功响应

```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

### 4.2 失败响应

```json
{
  "code": 400,
  "message": "error description",
  "data": {}
}
```

## 5. 接口列表

### 5.1 用户相关接口

#### 5.1.1 用户登录接口

- **URL**: `/api/user/login`

- **请求方式**: `POST`

- **请求参数**:

  - `username` (string): 用户名
  - `password` (string): 密码

- **请求示例**:

  ```json
  {
    "username": "user123",
    "password": "password123"
  }
  ```

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "token": "eyJhbGci..."
    }
  }
  ```

### 5.2 考生相关接口

#### 5.2.1 获取考生信息

- **URL**: `/api/student/info`

- **请求方式**: `GET`

- **请求头**: `Authorization`: `Bearer {token}`（在登录后获取的令牌）

- **请求参数**: 无

- **请求示例**:

  ```vb
  GET /api/student/info HTTP/1.1
  Host: example.com
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI...
  ```

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "subject": "电子信息（全日制）",
      "examNumber": "202411001",
      "name": "张三",
      "studentType": "应届生",
      "graduationSchool": "清华大学",
      "graduationTime": "2023-06-20",
      "graduatedMajor": "计算机科学与技术",
      "email": "zhangsan@example.com",
      "contact": "13800138000",
      "emergencyContact": "13900139000",
      "origin": "北京市",
      "idNumber": "110101199001011234",
      "supervisor1": "李教授",
      "supervisor2": "王教授",
      "supervisor3": "张教授",
      "acceptAdjustment": "是",
      "preferredSubjects": [
        "全日制计算机技术（01方向）",
        "全日制软件工程（02方向）",
        "全日制人工智能（04方向）",
        "全日制大数据技术与工程（05方向）"
      ],
      "singleSubSubject": "",
      "researchDirection": "",
      "graduateType": "学硕",
      "subSubjectOptions": [
        "全日制计算机技术（01方向）",
        "全日制软件工程（02方向）",
        "全日制软件工程国际联合培养（03方向）",
        "全日制人工智能（04方向）",
        "全日制大数据技术与工程（05方向）"
      ]
    }
  }
  ```

- **响应参数说明**:

| 参数名            | 类型   | 描述                           |
| ----------------- | ------ | ------------------------------ |
| subject           | string | 复试学科专业                   |
| examNumber        | string | 准考证号                       |
| name              | string | 姓名                           |
| studentType       | string | 考生类别                       |
| graduationSchool  | string | 本科毕业学校                   |
| graduationTime    | string | 毕业时间（格式: YYYY-MM-DD）   |
| graduatedMajor    | string | 本科专业                       |
| email             | string | 邮箱                           |
| contact           | string | 电话                           |
| emergencyContact  | string | 紧急电话                       |
| origin            | string | 生源地                         |
| idNumber          | string | 身份证号                       |
| supervisor1       | string | 一志愿导师                     |
| supervisor2       | string | 二志愿导师                     |
| supervisor3       | string | 三志愿导师                     |
| acceptAdjustment  | string | 是否接受方向调整               |
| preferredSubjects | array  | 按顺序选择的四个专业           |
| singleSubSubject  | string | 不接受方向调整时选择的二级学科 |
| researchDirection | string | 拟报研究方向（其他专业）       |
| graduateType      | string | 研究生类型                     |
| subSubjectOptions | array  | 二级学科选项，从后端获取       |

#### 5.2.2 提交考生信息

- **URL**: `/api/student/submitForm`

- **请求方式**: `POST`

- **请求参数**: 

  ```json
  {
      subject (string): 复试学科专业
      examNumber (string): 准考证号
      name (string): 姓名
      studentType (string): 考生类别
      graduationSchool (string): 本科毕业学校
      graduationTime (string): 毕业时间（格式：YYYY-MM-DD）
      graduatedMajor (string): 本科专业
      email (string): 邮箱
      contact (string): 电话
      emergencyContact (string): 紧急电话
      origin (string): 生源地
      idNumber (string): 身份证号
      supervisor1 (string): 一志愿导师
      supervisor2 (string): 二志愿导师
      supervisor3 (string): 三志愿导师
      acceptAdjustment (string): 是否接受方向调整（"是"或"否"）
      preferredSubjects (array of string): 按顺序选择的四个专业（当 acceptAdjustment 为 "是" 时）
      singleSubSubject (string): 不接受方向调整时选择的二级学科（当 acceptAdjustment 为 "否" 时）
      researchDirection (string): 拟报研究方向（其他专业）
      graduateType (string): 研究生类型
  }
  ```

- **请求示例**:

  ```json
  {
    "subject": "电子信息（全日制）",
    "examNumber": "123456789",
    "name": "张三",
    "studentType": "应届生",
    "graduationSchool": "某某大学",
    "graduationTime": "2023-06-30",
    "graduatedMajor": "计算机科学与技术",
    "email": "zhangsan@example.com",
    "contact": "13800000000",
    "emergencyContact": "13900000000",
    "origin": "江苏省南京市",
    "idNumber": "320**************",
    "supervisor1": "李老师",
    "supervisor2": "王老师",
    "supervisor3": "赵老师",
    "acceptAdjustment": "是",
    "preferredSubjects": [
      "全日制计算机技术（01方向）",
      "全日制软件工程（02方向）",
      "全日制人工智能（04方向）",
      "全日制大数据技术与工程（05方向）"
    ],
    "singleSubSubject": "",
    "researchDirection": "",
    "graduateType": "全日制"
  }
  ```

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "信息提交成功",
    "data": null
  }
  ```

### 5.3 复试组相关接口

#### 5.3.1 获取考生列表

- **URL**: `/api/interviewGroup/list`

- **请求方式**: `GET`

- **请求头**: `Authorization`: `Bearer {token}`（在登录后获取的令牌）

- **请求参数**: 无

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "primarySubject": "计算机科学与技术",
      "studentList": [
        {
          "id": "1",
          "name": "张三",
          "examNumber": "123456789",
          "studentType": "应届生"
        },
        {
          "id": "2",
          "name": "李四",
          "examNumber": "987654321",
          "studentType": ""
        }
      ]
    }
  }
  ```

#### 5.3.2 获取复试信息

- **URL**: `/api/interviewGroup/reExamInfo/:studentId`

- **请求方式**: `GET`

- **请求参数**:

  - `studentId` (string): 学生 ID

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "reExamTime": "2023-10-01 09:00:00",
      "reExamLocation": "教室101",
      "overallEvaluation": "优秀",
      "englishScore": "90",
      "professionalScore": "95",
      "interviewScore": "93"
    }
  }
  ```

#### 5.3.3 更新复试信息

- **URL**: `/api/interviewGroup/updateReExamInfo/:studentId`

- **请求方式**: `POST`

- **请求参数**:

  - `studentId` (string): 学生 ID

- **请求体**:

  ```json
  {
    "reExamTime": "2023-10-01 09:00:00",
    "reExamLocation": "教室101",
    "overallEvaluation": "优秀",
    "englishScore": "90",
    "professionalScore": "95",
    "interviewScore": "93"
  }
  ```

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "复试信息更新成功",
    "data": null
  }
  ```

### 5.4 学科负责人相关接口

#### 5.4.1 获取学科名额信息

- **URL**: `/api/disciplineHead/info`

- **请求方式**: `GET`

- **请求参数**: 无

- **响应示例**:

  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "primarySubject": "计算机科学与技术",
      "quotaIndicator": 100,
      "secondarySubjects": ["软件工程", "计算机应用技术"],
      "teacherQuota": [
        [
          {
            "name": "张三",
            "academicQuota": 10,
            "professionalQuota": 5,
            "phdQuota": 2
          },
          {
            "name": "李四",
            "academicQuota": 8,
            "professionalQuota": 7,
            "phdQuota": 1
          }
        ],
        [
          {
            "name": "王五",
            "academicQuota": 15,
            "professionalQuota": 10,
            "phdQuota": 3
          }
        ]
      ]
    }
  }
  ```

#### 5.4.2 提交名额分配

- **URL**: `/api/disciplineHead/submitQuota`

- **请求方式**: `POST`

- **请求参数**:

  ```json
  {
    "primarySubject": "计算机科学与技术",
    "secondarySubjects": ["软件工程", "计算机应用技术"],
    "teacherQuota": [
      [
        {
          "name": "张三",
          "academicQuota": 10,
          "professionalQuota": 5,
          "phdQuota": 2
        },
        {
          "name": "李四",
          "academicQuota": 8,
          "professionalQuota": 7,
          "phdQuota": 1
        }
      ],
      [
        {
          "name": "王五",
          "academicQuota": 15,
          "professionalQuota": 10,
          "phdQuota": 3
        }
      ]
    ]
  }
  ```

- **响应示例**:

  - **成功响应**:

    ```json
    {
      "code": 200,
      "message": "名额分配提交成功"
    }
    ```

  - **失败响应（名额与指标不符）**:

    ```json
    {
      "code": 400,
      "message": "总名额少于指标 5 个，请调整后再提交"
    }
    ```

## 6. 错误码说明

| 错误码 | 描述           |
| ------ | -------------- |
| 200    | 成功           |
| 400    | 参数错误       |
| 401    | 未授权         |
| 404    | 资源未找到     |
| 500    | 服务器内部错误 |

## 7. 附录

- **注意事项**: 所有请求都需要带上 `Authorization` 请求头（可选）。
- **联系信息**: 如果有任何问题，请联系开发团队。
